/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={"./modules/inline-translation/src/classic/index.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('{__webpack_require__.r(__webpack_exports__);\nObject(function webpackMissingModule() { var e = new Error("Cannot find module \'./classic-tooltip\'"); e.code = \'MODULE_NOT_FOUND\'; throw e; }());\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n\nvar ClassicTranslationTooltip = /*#__PURE__*/function () {\n  function ClassicTranslationTooltip(contentTinyMCE) {\n    _classCallCheck(this, ClassicTranslationTooltip);\n    this.contentTinyMCE = contentTinyMCE;\n    this.reactRoot = null;\n    this.prefix = \'ewtClassicInlineTranslation\';\n    this.toolTipTop = 0;\n    this.toolTipLeft = 0;\n    this.showDebounce = false;\n  }\n  return _createClass(ClassicTranslationTooltip, [{\n    key: "showToolTip",\n    value: function showToolTip() {\n      var _this = this;\n      clearTimeout(this.showDebounce);\n      this.showDebounce = setTimeout(function () {\n        _this.reactRoot.render(/*#__PURE__*/React.createElement(Object(function webpackMissingModule() { var e = new Error("Cannot find module \'./classic-tooltip\'"); e.code = \'MODULE_NOT_FOUND\'; throw e; }()), {\n          top: Math.max(_this.toolTipTop, 0),\n          left: Math.max(_this.toolTipLeft, 0),\n          prefix: _this.prefix,\n          unMountToolTip: function unMountToolTip() {\n            _this.reactRoot.unmount();\n            _this.reactRoot = null; // Reset the root reference\n          },\n          getContent: function getContent() {\n            return _this.contentTinyMCE.selection.getContent();\n          },\n          setContent: function setContent(value) {\n            _this.contentTinyMCE.selection.setContent(value);\n          }\n        }));\n      }, 200);\n    }\n  }, {\n    key: "init",\n    value: function init() {\n      var _this2 = this;\n      if (this.reactRoot) {\n        this.reactRoot.unmount();\n        this.reactRoot = null;\n      }\n      this.contentTinyMCE.on(\'selectionchange\', function () {\n        if (!_this2.contentTinyMCE || !_this2.contentTinyMCE.selection) {\n          return;\n        }\n        var selectedText = _this2.contentTinyMCE.selection.getContent();\n        if (selectedText.length <= 0) {\n          return;\n        }\n        var selectedElements = _this2.contentTinyMCE.selection.getSel();\n        if (!selectedElements || !selectedElements.extentNode) {\n          return;\n        }\n        var extendNode = selectedElements.extentNode;\n        var extendOffset = selectedElements.extentOffset;\n        var range = document.createRange();\n        range.setStart(extendNode, extendOffset);\n        range.setEnd(extendNode, extendOffset);\n        var rect = range.getBoundingClientRect();\n        if (!_this2.reactRoot) {\n          _this2.reactRoot = ReactDOM.createRoot(document.getElementById(\'ewt-classic-inline-translation\'));\n        }\n        _this2.toolTipTop = rect.top + 59;\n        _this2.toolTipLeft = rect.left - 50;\n        _this2.showToolTip();\n      });\n      this.contentTinyMCE.on(\'mousedown\', function () {\n        _this2.reactRoot && _this2.reactRoot.unmount();\n        _this2.reactRoot = null; // Reset the root reference\n      });\n    }\n  }]);\n}();\njQuery(window).on(\'load\', function () {\n  if (typeof tinymce !== \'undefined\' && tinymce) {\n    var contentTinyMCE = tinymce.get(\'content\');\n    if (contentTinyMCE) {\n      var _document$querySelect;\n      var wrapperElement = document.createElement(\'div\');\n      wrapperElement.id = \'ewt-classic-inline-translation\';\n      (_document$querySelect = document.querySelector(\'#wp-content-wrap\')) === null || _document$querySelect === void 0 || _document$querySelect.appendChild(wrapperElement);\n      var classicTranslationTooltip = new ClassicTranslationTooltip(contentTinyMCE);\n      classicTranslationTooltip.init();\n    }\n  }\n});\n\n//# sourceURL=webpack://easy-wp-translator/./modules/inline-translation/src/classic/index.js?\n}')}},__webpack_require__={r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},__webpack_exports__={};__webpack_modules__["./modules/inline-translation/src/classic/index.js"](0,__webpack_exports__,__webpack_require__)})();